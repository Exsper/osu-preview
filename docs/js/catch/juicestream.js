function JuiceStream(t,i){Slider.call(this,t,i);var e=t[5].split("|"),i=e[0];e[0]=this.position;for(var s=1;s<e.length;s++)e[s]=new Point(e[s].split(":"));this.repeat=0|t[6],this.pixelLength=+t[7],this.timingPoint=this.beatmap.timingPointAt(this.time),this.beatLength=this.timingPoint.beatLength,this.timingPointStart=this.timingPoint.time,this.sliderTime=this.beatLength*(this.pixelLength/this.beatmap.SliderMultiplier)/100,this.velocityFactor=100*this.beatmap.SliderMultiplier/this.beatLength,this.tickDistanceFactor=100*this.beatmap.SliderMultiplier/this.beatmap.SliderTickRate,this.velocity=this.velocityFactor*this.timingPoint.sliderVelocity,this.tickDistance=this.tickDistanceFactor*this.timingPoint.sliderVelocity,this.endTime=this.time+this.sliderTime*this.repeat,this.duration=this.endTime-this.time,this.spanCount=parseInt(this.repeat),this.curve=Curve.parse(i,e,this.pixelLength),this.endPosition=this.curve.pointAt(1),this.max_length=1e5;var h=Math.min(this.max_length,this.pixelLength);if(this.tickDistance=Math.clamp(this.tickDistance,0,h),this.minDistanceFromEnd=10*this.velocity,this.events=[],this.events.push({type:"head",time:this.time,pathProgress:0}),0!=this.tickDistance)for(let i=0;i<this.spanCount;i++){var a=this.time+i*this.sliderTime,r=i%2==1;let t=this.generateTicks(i,a,this.sliderTime,r,h,this.tickDistance,this.minDistanceFromEnd);r&&(t=t.reverse()),this.events.push(...t),i<this.spanCount-1&&this.events.push({type:"repeat",time:a+this.sliderTime,pathProgress:(i+1)%2})}t=this.spanCount-1,i=this.time+t*this.sliderTime,t=Math.max(this.time+this.duration/2,i+this.sliderTime-36);let n=(t-i)/this.sliderTime;this.spanCount%2==0&&(n=1-n),this.events.push({type:"legacyLastTick",time:t,pathProgress:n}),this.events.push({type:"tail",time:this.endTime,pathProgress:this.spanCount%2}),this.nested=[]}JuiceStream.prototype=Object.create(Slider.prototype),(JuiceStream.prototype.constructor=JuiceStream).ID=2,(Catch.prototype.hitObjectTypes[JuiceStream.ID]=JuiceStream).prototype.generateTicks=function(t,i,e,s,h,a,r){var n=[];for(let t=a;t<=h&&!(t>=h-r);t+=a){var p=t/h;n.push({type:"tick",time:i+(s?1-p:p)*e,pathProgress:p})}return n},JuiceStream.prototype.buildNested=function(){this.nested=[];let e=null;for(let t=0;t<this.events.length;t++){if(null!=e){var s=this.events[t].time-e.time;if(80<s){let t=s;for(;100<t;)t/=2;for(let i=t;i<s;i+=t){let t=(i+e.time-this.time)*this.repeat/this.duration;1<(t%=2)&&(t=2-t);var h=this.curve.pointAt(t);this.nested.push(new PalpableCatchHitObject({type:"TinyDroplet",time:i+e.time,x:h.x,color:this.color,radius:this.beatmap.tinyRadius},this.beatmap))}}}switch(e=this.events[t],this.events[t].type){case"tick":this.nested.push(new PalpableCatchHitObject({type:"Droplet",time:this.events[t].time,x:this.curve.pointAt(this.events[t].pathProgress).x,color:this.color,radius:this.beatmap.smallRadius},this.beatmap));break;case"head":case"tail":case"repeat":this.nested.push(new PalpableCatchHitObject({type:"Fruit",time:this.events[t].time,x:this.curve.pointAt(this.events[t].pathProgress).x,color:this.color,radius:this.beatmap.circleRadius},this.beatmap))}}return this};
function Standard(t){Beatmap.call(this,t);for(var t=window.localStorage.getItem("DefaultColor"),i=(this.useDefaultColor=t?parseInt(t):0,this.Colors.length&&!this.useDefaultColor?this.Colors.push(this.Colors.shift()):this.Colors=Standard.DEFAULT_COLORS,1),s=-1,e=1,a=0;a<this.HitObjects.length;a++)(r=this.HitObjects[a])instanceof Spinner?e=1:(r.newCombo||e)&&(s=(s+(i=1)+r.comboSkip)%this.Colors.length,e=0),r.combo=i++,r.color=this.Colors[s];for(a=this.HitObjects.length-1;0<a;a--){var r=this.HitObjects[a];if(!(0!=r.stack||r instanceof Spinner))for(var o=a-1;0<=o;o--){var n=this.HitObjects[o];if(!(n instanceof Spinner)){if(r.time-n.endTime>this.approachTime*this.StackLeniency)break;if(r.position.distanceTo(n.endPosition)<Standard.STACK_LENIENCE){if(n instanceof Slider){for(var c=r.stack-n.stack+1,h=o+1;h<=a;h++){var p=this.HitObjects[h];p.position.distanceTo(n.endPosition)<Standard.STACK_LENIENCE&&(p.stack-=c)}break}n.stack=r.stack+1,r=n}}}}this.circleRadius=this.circleDiameter/2,this.circleBorder=this.circleRadius/8,this.shadowBlur=this.circleRadius/15}Standard.prototype=Object.create(Beatmap.prototype,{approachTime:{get:function(){return this.ApproachRate<5?1800-120*this.ApproachRate:1200-150*(this.ApproachRate-5)}},circleDiameter:{get:function(){return 108.848-8.9646*this.CircleSize}},stackOffset:{get:function(){return this.circleDiameter/20}}}),(Standard.prototype.constructor=Standard).prototype.hitObjectTypes={},Standard.ID=0,(Beatmap.modes[Standard.ID]=Standard).DEFAULT_COLORS=["rgb(0,202,0)","rgb(18,124,255)","rgb(242,24,57)","rgb(255,292,0)"],Standard.STACK_LENIENCE=3,Standard.prototype.update=function(t){t.shadowColor="#666",t.lineCap="round",t.lineJoin="round";try{t.font=this.circleRadius+'px "Comic Sans MS", cursive, sans-serif'}catch(t){}t.textAlign="center",t.textBaseline="middle",t.translate((Beatmap.WIDTH-Beatmap.MAX_X)/2,(Beatmap.HEIGHT-Beatmap.MAX_Y)/2)},Standard.prototype.draw=function(t,i){for(void 0===this.tmp.first&&(this.tmp.first=0,this.tmp.last=-1);this.tmp.first<this.HitObjects.length;){if(t<=(s=this.HitObjects[this.tmp.first]).endTime+s.__proto__.constructor.FADE_OUT_TIME)break;this.tmp.first++}for(;this.tmp.last+1<this.HitObjects.length&&t>=this.HitObjects[this.tmp.last+1].time-this.approachTime;)this.tmp.last++;for(var s,e=this.tmp.last;e>=this.tmp.first;e--)t>(s=this.HitObjects[e]).endTime+s.__proto__.constructor.FADE_OUT_TIME||s.draw(t,i)};